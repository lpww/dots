#!/usr/bin/env bash

# create a new component from an existing one

SOURCE_PATH=${1}
NEW_PATH=${2}
SOURCE_NAME=$(basename $SOURCE_PATH)
NEW_NAME=$(basename $NEW_PATH)
echo creating $NEW_NAME component in $NEW_PATH
echo based on $SOURCE_NAME component in $SOURCE_PATH
mkdir $NEW_PATH #create new dir
cp $SOURCE_PATH/**/* $NEW_PATH #copy source component to new path
mv $NEW_PATH/$SOURCE_NAME.jsx $NEW_PATH/$NEW_NAME.jsx #update file name
mv $NEW_PATH/$SOURCE_NAME.spec.jsx $NEW_PATH/$NEW_NAME.spec.jsx #update test file name
grep $SOURCE_NAME $NEW_PATH -lR | xargs sed -i s/$SOURCE_NAME/$NEW_NAME/g #update file contents
