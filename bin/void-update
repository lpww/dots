#!/bin/sh

set -e

# void-update
# update void system packages from xbps, void-packages, and flatpak
# requires sudo

# update xbps packages
echo "void-update: updating xbps packages"
sudo xbps-install -Su

# update void-packages packages
echo "void-update: updating void-packages packages"

# pull the latest updates from void-packages repo
cd ~/code/void-packages
git checkout master
git pull upstream master

# build updated packages that are already installed on the system
./xbps-src update-local

# list and install updated packages that are already on the system
./xbps-src show-sys-updates | xargs xi

# update flatpak packages
echo "void-update: updating flatpak package"
flatpak update
